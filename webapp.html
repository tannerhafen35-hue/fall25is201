<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Water Sort Prototype</title>

<style>
    /* RESET */
    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    body {
        font-family: Arial, sans-serif;
        background: #f2f2f2;
        min-height: 100vh;
    }

    /* NAVBAR */
    .navbar {
        position: fixed;
        top: 0;
        width: 100%;
        background: #333;
        padding: 10px 20px;
        display: flex;
        justify-content: flex-end;
        gap: 20px;
        z-index: 1000;
    }

    .navbar a {
        color: white;
        text-decoration: none;
        font-weight: bold;
        padding: 8px 12px;
        border-radius: 5px;
        transition: background 0.3s;
    }

    .navbar a:hover {
        background: #555;
    }

    /* GAME CONTAINER */
    .container {
        height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding-top: 60px; /* space for navbar */
    }

    h1 {
        margin-bottom: 10px;
    }

    .message {
        height: 20px;
        margin-bottom: 15px;
        font-weight: bold;
    }

    .game {
        display: flex;
        gap: 25px;
    }

    .bottle {
        width: 80px;
        height: 200px;
        border: 3px solid #333;
        border-radius: 0 0 20px 20px;
        display: flex;
        flex-direction: column-reverse;
        padding: 5px;
        cursor: pointer;
        background: white;
    }

    .bottle.selected {
        border-color: gold;
    }

    .water {
        height: 45px;
        border-radius: 8px;
        margin: 2px 0;
    }

    .red { background: red; }
    .blue { background: blue; }
    .green { background: green; }

    button {
        margin-top: 15px;
        padding: 8px 16px;
        font-size: 16px;
        cursor: pointer;
    }
</style>
</head>

<body>

<!-- NAV BAR -->
<nav class="navbar">
    <a href="index.html">Home</a>
    <a href="scratch.html">Scratch</a>
</nav>

<!-- GAME CONTENT -->
<div class="container">
    <h1>ðŸ’§ Water Sort</h1>
    <div class="message" id="message">Click a bottle to start</div>

    <div class="game">
        <div class="bottle" onclick="selectBottle(0)"></div>
        <div class="bottle" onclick="selectBottle(1)"></div>
        <div class="bottle" onclick="selectBottle(2)"></div>
        <div class="bottle" onclick="selectBottle(3)"></div>
    </div>

    <button onclick="resetGame()">Reset</button>
</div>

<script>
    const maxHeight = 4;
    let selected = null;

    let bottles = [
        ["red", "blue", "green", "red"],
        ["green", "red", "blue", "green"],
        ["blue", "green", "red", "blue"],
        []
    ];

    function render() {
        document.querySelectorAll(".bottle").forEach((bottle, i) => {
            bottle.innerHTML = "";
            bottle.classList.toggle("selected", i === selected);

            bottles[i].forEach(color => {
                const div = document.createElement("div");
                div.className = "water " + color;
                bottle.appendChild(div);
            });
        });
    }

    function selectBottle(index) {
        const message = document.getElementById("message");

        if (selected === null) {
            if (bottles[index].length === 0) return;
            selected = index;
            message.textContent = "Bottle selected. Choose another bottle.";
        } else {
            pour(selected, index);
            selected = null;
        }

        render();
        checkWin();
    }

    function pour(from, to) {
        const message = document.getElementById("message");

        if (from === to) return;
        if (bottles[from].length === 0) return;
        if (bottles[to].length >= maxHeight) return;

        const color = bottles[from][bottles[from].length - 1];
        const topTo = bottles[to][bottles[to].length - 1];

        if (bottles[to].length === 0 || topTo === color) {
            bottles[from].pop();
            bottles[to].push(color);
            message.textContent = "Poured!";
        } else {
            message.textContent = "Invalid move!";
        }
    }

    function checkWin() {
        const won = bottles.every(b =>
            b.length === 0 ||
            (b.length === maxHeight && b.every(c => c === b[0]))
        );

        if (won) {
            document.getElementById("message").textContent = "ðŸŽ‰ You Win!";
        }
    }

    function resetGame() {
        location.reload();
    }

    render();
</script>

</body>
</html>
